
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/favicon.ico">

    <title><%= profile.username %></title>

    <!-- Bootstrap core CSS -->
    <link href="/stylesheets/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style type="text/css">
      body {
      padding-top: 80px;
    }
      h4 {
        color: #778899;
      }

      #QA {
        padding-top: 50px;
      }
      


    </style>
  </head>

  <body>
    <%- message %>
    <% if(username == null) { %>
      <% include top-no-login.html %>
    <% }else {%>
      <% include top-login.html %>
      <%}%>

    <!-- nav-tabs -->
    <div class="container">
     <!-- profile -->
      <div id="profile">
        <div class="media">
          <div class="media-left">
            <div style="position: relative; width: 150px; height: 150px;" onmouseover="profileOver()" onmouseout="profileOut()"> 
              <img id="profilePic" style="opacity:1;" height="150" width="150" class="media-object" src="/pic/profile/<%=profile.pic%>.png" alt="">
              <% if(username == profile.username) {%>
              <span style="position: absolute; top: 65px; left:40px">
                <a id="profileChange" style="opacity:0;" class="btn btn-default" href="#" role="button"  data-toggle="modal" data-target="#profileModal">Change
                </a>
              </span>
              <%}%>
            </div>
          </div>
          <div class="media-body">
            <h2 style="font-family: Times, Georgia, Georgia;" class="media-heading"><%=profile.username%></h2>
            <font><%=profile.info%></font>
          </div>
        </div>
      </div>

      <!-- Modal -->
      <div class="modal fade" id="profileModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
          <form action="#" id="profilePicForm" method="post">
            <div class="modal-content">
              <div class="modal-body">
                <div class="row">
                <% for(i = 0; i < num; i++) {%>
                  <div class="col-md-3 col-xs-4">
                    <img id="pic<%=i%>" height="100" width="100" src="/pic/profile/<%=i%>.png" alt="" onclick="selectPic(this, '<%=i%>')">
                  </div>
                <%}%>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Save changes</button>
              </div>
            </div>
          </form>
        </div>
      </div>

     <!--tag-->
      <div id="QA">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
          <li role="presentation" class="active"><a href="#myQuestions" aria-controls="myQuestions" role="tab" data-toggle="tab">My Questions</a></li>
          <li role="presentation"><a href="#myAnswers" aria-controls="myAnswers" role="tab" data-toggle="tab">My Answers</a></li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">
          <div role="tabpanel" class="tab-pane active" id="myQuestions">
            <!-- Questions list -->
              <% for(i = 0; i < myQuestions.length; i++) { %> 
                <div class="page-header"> 
                  <div class="row">
                    <div class="col-md-9">
                      <h3>
                        <a href="/questions/<%= myQuestions[i]._id %>"><%= myQuestions[i].title %></a>
                        <!-- <span style="float:right;color:grey; font-size: 50%">delete</span> -->
                        <p><small><%= myQuestions[i].detail %></small></p>
                      </h3>
                    </div>
                    <div class="col-md-3">
                        <div class="text-right"><font style="color:grey;">Posted by: </font><a href="/user/<%=myQuestions[i].user%>"><%= myQuestions[i].user %></a></div>
                        <h6 class="text-right">
                        <%=myQuestions[i].date.getFullYear()%>.<%=myQuestions[i].date.getMonth()+1%>.<%=myQuestions[i].date.getDate()%> <%=myQuestions[i].date.getHours()%>:<%=myQuestions[i].date.getMinutes()%>:<%=myQuestions[i].date.getSeconds()%>
                        </h6>
                    </div>
                  </div>
                </div>
              <% } %> 
          </div>
          <div role="tabpanel" class="tab-pane" id="myAnswers">
            <!-- Answers list -->
              <% for(i = 0; i < myAnswers.length; i++) { %> 
                <div class="page-header">
                  <h3><a href="/questions/<%= myAnswers[i].questionId %>"><%= myAnswers[i].questionTitle %></a></h3>
                </div> 
                <%= myAnswers[i].body %>
              <% } %>
          </div>
        </div>
      </div>
    </div>

    


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/javascripts/jquery-3.1.0.min.js"></script>
    <script src="/javascripts/bootstrap.min.js"></script>
    <script src="/javascripts/moment.js"></script>
    <script>
      var select = "<%=profile.pic%>";
      document.getElementById("pic" + select).style = "border-style: outset; border-width: 2px;";

      function profileOver() {
        if('<%=username%>' == '<%=profile.username%>') {
          document.getElementById("profilePic").style.opacity = 0.3;
          document.getElementById("profileChange").style.opacity = 0.8;
        }
      }
      function profileOut() {
        if('<%=username%>' == '<%=profile.username%>') {
          document.getElementById("profilePic").style.opacity = 1;
          document.getElementById("profileChange").style.opacity = 0;
        }
      }
      
      function selectPic(obj, i) {
        document.getElementById("pic" + select).style = "";
        obj.style =  "border-style: outset; border-width: 2px;"
        select = i;
        document.getElementById("profilePicForm").action = "/user/<%=username%>/profile/pic?num=" + select;
      }
    </script>
  </body>
</html>
